"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5675],{90838:e=>{var t,o,l=(o=[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90",e.exports=l},964569:(e,t,o)=>{o.d(t,{Z:()=>u});var l=o(702664),i=o(214494),s=o(139405),n=o(664569),a=o(600147),r=o(956800),d=o(274415),c=o(492583);let _={[n.o.aggregatedComment]:"AggregatedCommentReplyResource",[n.o.pin]:"AggregatedCommentResource",[n.o.didIt]:"DidItCommentsResource"};function u(){let e=(0,l.useDispatch)(),{aggregatedCommentCreated:t,updateCommentCount:o}=(0,s.nf)();return async({force:l=!0,fromUnifiedComment:s,objectId:n,objectType:u,orbacSubjectId:m,pinId:h,replyToCommentId:g,tags:p,text:f})=>{let y=_[u],A={force:l,objectId:n,pinId:h,tags:p,text:f,replyToCommentId:g,...m?{orbacSubjectId:m}:{}},x=c.Z.AGGREGATED_COMMENTS;s&&(x="pin"===u?c.Z.UNIFIED_COMMENTS:c.Z.AGGREGATED_COMMENT_REPLIES);let b=await i.Z.create(y,A).callCreate({showError:!1}),E=b.resource_response.data;return t(n,E),e((0,r.vX)({feedType:x,feedId:n,itemIds:[E.id],itemType:E.type,prepend:!0})),"aggregatedComment"===u?o(n,1):"pin"!==u&&e((0,a.L8)(n,1)),h&&e((0,d.R)(h,1)),E.id||b}}},509278:(e,t,o)=>{o.d(t,{Z:()=>n});var l=o(883119),i=o(785893);let s=/#[\p{L}\p{N}_]\S*/gu;function n({isHashtagInDescriptionDisplayEnabled:e,text:t}){return t.split(new RegExp(/(#\S*)/)).map((t,o)=>{let n=`${o}-${t}`;return(e?t.match(s):t.includes("#"))?(0,i.jsx)(l.xv,{color:"link",inline:!0,size:"300",children:(0,i.jsx)(l.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},n):(0,i.jsx)("span",{children:t},n)})}},748373:(e,t,o)=>{o.d(t,{Z:()=>m});var l=o(667294),i=o(883119),s=o(509278),n=o(407043),a=o(773285),r=o(785893);let d=e=>e.replace(/\s+/g," "),c=e=>null!=e&&e>-1,_=(e,t)=>{let o=t.substr(0,e);return(e??0)-(o.length-d(o).length)},u=({color:e,mention:t,tagObjectId:o,tagType:l,textSize:s})=>{let{logContextEvent:a}=(0,n.v)();return(0,r.jsx)(i.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:o,tag_type:l}})},underline:"none",children:(0,r.jsx)(i.xv,{color:e,inline:!0,overflow:"normal",size:s,weight:"bold",children:t})},o)},m=({description:e,mentionLinkColor:t,shouldAdjustOffset:o,shouldMakeHashtagLinksFromText:n,textSize:d,userMentionTags:m})=>{let{checkExperiment:h}=(0,a.F)(),g=h("web_hashtags_in_description_display").anyEnabled;if(0===m.length)return(0,r.jsx)(l.Fragment,{children:e});let p=0,f=[],y=[...m].map(t=>o?{...t,offset:_(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>c(e.offset)&&c(e.length));return y.forEach(o=>{let l=o.offset??0,i=o.length??0,s=e.substr(p,l-p),n=e.substr(l,i);f.push(s),f.push((0,r.jsx)(u,{color:t,mention:n,tagObjectId:o.objectId,tagType:o.tagType,textSize:d})),p=l+i}),f.push(e.substr(p)),(n?f.flatMap(e=>"string"!=typeof e?e:(0,s.Z)({isHashtagInDescriptionDisplayEnabled:g,text:e})):f).reduce((e,t)=>(0,r.jsxs)(i.xv,{inline:!0,size:d,children:[e,t]}),null)}},129274:(e,t,o)=>{o.d(t,{N:()=>d,d:()=>r});var l=o(667294),i=o(174798),s=o(425288),n=o(785893);let{Provider:a,useHook:r}=(0,s.Z)("Flag"),d=({children:e})=>{let[t,o]=(0,l.useState)(),[s,r]=(0,l.useState)(i.Zw.REPORT),[d,c]=(0,l.useState)(i.qb.STARTED),[_,u]=(0,l.useState)(),[m,h]=(0,l.useState)(),g=(0,l.useMemo)(()=>({flagReason:m,flow:s,status:d,selectedReason:_,modalTitle:t,setFlagReason:h,setFlow:r,setModalTitle:o,setStatus:c,setSelectedReason:u}),[t,s,d,_,m]);return(0,n.jsx)(a,{value:g,children:e})}},923764:(e,t,o)=>{o.d(t,{Z:()=>D});var l=o(667294),i=o(702664),s=o(883119),n=o(214494);async function a({userId:e,blockSource:t,blockContext:o,logContextEvent:l}){let i=n.Z.create("UserBlockResource",{blocked_user_id:e,block_source:t,block_context:o});await i.callCreate(),l({event_type:54,object_id_str:e})}var r=o(129274),d=o(174798),c=o(512465),_=o(898781),u=o(349700),m=o(966113),h=o(785893);let g=m.K_Y+"?source=block_dialogue";function p(e){return e.map(({full_name:e})=>e)}let f=function({users:e,onClose:t,onSubmit:o}){let l=(0,_.ZP)(),i=(0,h.jsx)("strong",{children:(0,c.Z)(p(e),l)},"userlist");return(0,h.jsxs)("form",{method:"post",children:[(0,h.jsxs)(s.xu,{padding:8,children:[(0,h.jsx)(s.xv,{children:(0,u.nk)(l.bt("If you block {{ users }}, you won’t be able to follow each other or interact with each other’s Pins.", "If you block {{ users }}, you won’t be able to follow each other or interact with each other’s Pins.", "description of blocking users", undefined, true),{users:i})}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(s.xv,{children:(0,h.jsx)(s.rU,{display:"inlineBlock",href:g,underline:"hover",children:l.bt("Learn more", "Learn more", "link to learn more about blocking", undefined, true)})})]}),(0,h.jsx)(s.xu,{padding:2,children:(0,h.jsxs)(s.kC,{alignItems:"stretch",gap:{row:1,column:0},justifyContent:"end",children:[(0,h.jsx)(s.zx,{fullWidth:!0,onClick:t,text:l.bt("Cancel", "Cancel", "UserBlock.Cancel", undefined, true)}),(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{o()},text:l.bt("Block", "Block", "UserBlock.Submit", undefined, true),type:"submit"})]})})]})};var y=o(112690),A=o(19121);let x=({deleteAndCloseConversation:e,flagReason:t,flagType:o,onClose:i,selectedReason:n,status:g,users:x,blockContext:b})=>{let E=(0,_.ZP)(),T=(0,y.Z)(),[P,v]=(0,l.useState)({}),{setModalTitle:I,setStatus:C}=(0,r.d)(),w=(0,A.Z)(),{id:k}=w.isAuth?w:{},z=x.filter(({id:e})=>P[e]),j=z.length>0,D=()=>{let e;[d.qb.SUBMITTED,d.qb.PROCESSING].includes(g)?e=E.nbt(["Block this person?", "Block these people?"], z.length, "BlockAndUnfollow", true):o===d.Vm.CONVERSATION&&(e=g===d.qb.COMPLETED?(0,u.nk)(E.bt("You’ve blocked {{usernames}}", "You’ve blocked {{usernames}}", "BlockAndUnfollow", undefined, true),{usernames:(0,c.Z)(p(z),E).join("")}).join(""):E.bt("Thanks for your report", "Thanks for your report", "BlockAndUnfollow", undefined, true)),I(e)};(0,l.useEffect)(()=>{D()},[g]),(0,l.useEffect)(()=>{C(j?d.qb.SELECTED:d.qb.STARTED)},[P]);let R=x.filter(({id:e})=>e!==k),L=[d.qb.STARTED,d.qb.COMPLETED].includes(g);return(0,h.jsx)("form",{method:"post",children:[d.qb.SUBMITTED,d.qb.PROCESSING].includes(g)?(0,h.jsx)(f,{onClose:()=>{C(d.qb.SELECTED)},onSubmit:()=>(C(d.qb.PROCESSING),Promise.all(Object.keys(P).filter(e=>P[e]).map(e=>a({userId:e,blockSource:"message_report",blockContext:b,logContextEvent:T}))).finally(()=>{C(d.qb.COMPLETED)})),users:z}):(0,h.jsxs)(s.xu,{padding:8,children:[(0,h.jsx)(s.xu,{children:g!==d.qb.COMPLETED?(()=>{let e;"harassingOther"===n?e=(0,u.nk)(E.bt("We remove content that identifies and attacks private people because we consider it to be bullying. We also don’t allow content that reveals someone’s personally identifiable information. Find out more about our {{ communityGuidelines }}.", "We remove content that identifies and attacks private people because we consider it to be bullying. We also don’t allow content that reveal someone’s personally identifiable information. Learn more about our {{ communityGuidelines }}.", "confirmation message after reporting harassment", undefined, true),{communityGuidelines:(0,h.jsx)(s.rU,{display:"inlineBlock",href:m.MsG,underline:"hover",children:E.bt("Community Guidelines", "Community Guidelines", "link to community guidelines for harassment", undefined, true)},"policyLink")}):"harassingPublicFigure"===n?e=E.bt("Please note that we won’t necessarily take down stuff that attacks public figures.", "Please note that we won’t necessarily take down stuff that attacks public figures.", "message shown after reporting harrassment", undefined, true):"harassingFriend"===n?e=E.bt("Before we can review this Pin, we need to hear from the person who’s being harassed. Please ask your friend to report this Pin to us.", "Before we can review this Pin, we need to hear from the person who’s being harassed. Please have your friend report this Pin to us.", "message shown after reporting harrassment", undefined, true):["spam","policies","hurtfulContent"].includes(t)&&(e=E.bt("We’ll have a look at this Pin and delete it if it goes against our policies.", "We’ll take a look at this Pin and delete it if it goes against our policies.", "confirmation message after reporting a pin", undefined, true));let o=E.nbt(["You can also block this person.", "You can also block these people."], R.length, "description to block people", true);return(0,h.jsxs)(l.Fragment,{children:[e&&(0,h.jsx)(s.xu,{marginBottom:8,children:(0,h.jsx)(s.xv,{children:e})}),(0,h.jsx)(s.xu,{marginBottom:8,children:(0,h.jsx)(s.xv,{children:o})}),(0,h.jsx)(s.xu,{marginBottom:8,children:R.map(({id:e,full_name:t})=>(0,h.jsx)(s.XZ,{checked:!!P[e],helperText:E.bt("You won’t be able to send each other messages or interact with each other’s Pins.", "You won’t be able to send each other messages or interact with each other’s Pins.", "BlockAndUnfollow", undefined, true),id:"blockPinner"+e,label:(0,u.nk)(E.bt("Block {{ pinnerName }}", "Block {{ pinnerName }}", "BlockAndUnfollow", undefined, true),{pinnerName:t}).join(""),onChange:({checked:t})=>{v({...P,[e]:t})}},e))})]})})():j&&(0,h.jsx)(s.xu,{marginBottom:8,children:(0,h.jsx)(s.xv,{children:E.bt("You won’t be able to follow each other or interact with each other’s Pins.", "You won’t be able to follow each other or interact with each other’s pins.", "BlockAndUnfollow", undefined, true)},"blockingConfirmation")})}),(0,h.jsxs)(s.xu,{children:[g!==d.qb.COMPLETED&&(0,h.jsx)(s.xu,{marginBottom:8,children:(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(E.bt("Learn more about {{ linkToTopic }}", "Learn more about {{ linkToTopic }}", "BlockAndUnfollow", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{display:"inlineBlock",href:m.K_Y,underline:"hover",children:E.bt("blocking", "blocking", "BlockAndUnfollow", undefined, true)},"policyLink")})})}),(0,h.jsx)(s.xu,{children:(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:L?()=>{i(),g===d.qb.COMPLETED&&e?.()}:()=>{v(P),C(d.qb.SUBMITTED)},text:L?E.bt("Done", "Done", "Block.Complete", undefined, true):E.bt("Block", "Block", "BlockAndUnfollow", undefined, true)})})]})]})})};function b({flagOptions:e,flow:t,handleClose:o,handleNext:l,selectedReason:i,showPrimaryAction:n,submitButton:a}){let r=(0,_.ZP)();if(t===d.Zw.REPORT){if(d.qb.PROCESSING===status||e.getFlagOption(i)?.isTerminalReason)return a;if(n)return(0,h.jsx)(s.zx,{color:"red",disabled:void 0===i,fullWidth:!0,onClick:l,text:r.bt("Next", "Next", "go to the next view in the report flow", undefined, true)})}else if(t===d.Zw.END)return(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:o,text:r.bt("Got it", "Got it", "confirm reporting flow is done & close modal", undefined, true)});return null}function E({flow:e,flagReason:t}){let o=(0,_.ZP)();if(e===d.Zw.REPORT){if("attacks"===t)return(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(o.bt("Learn more about our {{ linkToTopic }}", "Learn more about our {{ linkToTopic }}", "footer link to learn more about community guidelines", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{href:m.MsG,target:"blank",children:(0,h.jsx)(s.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:o.bt("Community Guidelines", "Community Guidelines", "name of footer link to community guidelines", undefined, true)})},"policyLink")})});if("policies"===t)return(0,h.jsxs)("p",{children:[(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{href:m.MsG+"#sub-section-adult-content",target:"blank",children:(0,h.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o.bt("our nudity policies", "our nudity policies", "name of footer link to policy", undefined, true)})},"policyLink")})}),(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{href:m.MsG+"#sub-section-dangerous-goods-and-activities",target:"blank",children:(0,h.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o.bt("our policies on hurtful content", "our policies on hurtful content", "name of footer link to policy", undefined, true)})},"policyLink")})}),(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{href:m.MsG+"#sub-section-violence",target:"blank",children:(0,h.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o.bt("our policies on gore", "our policies on gore", "name of footer link to policy", undefined, true)})},"policyLink")})})]});if("spam"===t||void 0===t)return(0,h.jsx)(s.xv,{size:"100",children:(0,u.nk)(o.bt("Learn about {{ linkToTopic }}", "Learn about {{ linkToTopic }}", "footer link to learn more about a topic", undefined, true),{linkToTopic:(0,h.jsx)(s.rU,{href:m.MsG,target:"blank",children:(0,h.jsx)(s.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:"spam"===t?o.bt("our spam policies", "our spam policies", "name of footer link to policy", undefined, true):o.bt("our policies", "our policies", "name of footer link to policy", undefined, true)})},"policyLink")})})}return null}function T({arrayOfData:e,handleSelectReason:t,selectedReason:o}){let l=(0,_.ZP)();return(0,h.jsx)(s.xu,{padding:2,children:(0,h.jsx)(s.FX,{id:"flag-option-radio-group",legend:l.bt("Flag legends", "Flag legends", "flag_legend", undefined, true),legendDisplay:"hidden",children:e.map((e,l)=>{let{condition:i}=e;return void 0===i||i?function(e,t,o,l){let{text:i,value:n,category:a}=e;return(0,h.jsx)(s.xu,{paddingY:2,children:(0,h.jsx)(s.FX.RadioButton,{checked:o===n,id:n,label:i,name:"flagReason",onChange:({checked:e})=>t(e,n,a),value:n})},l)}(e,t,o,l):null})})})}class P{constructor(e){this.config=e,this.configMap=function(e){let t={};for(let o in e){let l=e[o];l.forEach(e=>{let{value:l}=e;if(Object.prototype.hasOwnProperty.call(t,l))throw Error("Duplicate key in FlagOptions config: "+l);t[l]={...e,parentOption:o}})}return t}(e)}getFlagOption(e){return e?this.configMap[e]:null}renderFlagLabels(e){let{flagReason:t,onSelectReason:o,selectedReason:l}=e;return(0,h.jsx)(T,{arrayOfData:this.config[t],handleSelectReason:o,selectedReason:l})}}var v=o(121151);function I(e,t,o){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class C extends l.Component{constructor(...e){super(...e),I(this,"flagOptions",new P(this.props.flagOptionsConfig)),I(this,"renderContent",()=>{let{content:e,flow:t,onSelectReason:o,selectedReason:l}=this.props;return e||(t===d.Zw.REPORT?this.flagOptions.renderFlagLabels({flagReason:this.props.flagReason||"__default",onSelectReason:o,selectedReason:l}):t===d.Zw.END?(0,h.jsx)(s.xv,{children:this.props.i18n.bt("We’ll use your feedback to make your Pinterest experience better.", "We’ll use your feedback to make your Pinterest experience better.", "final message in reporting flow", undefined, true)}):void 0)})}componentDidUpdate(e){let{flow:t,onCompletedReport:o,onCompletedBlock:l}=e;if(this.props.flow!==t)switch(t){case d.Zw.REPORT:o&&o();break;case d.Zw.BLOCK:l&&l()}}render(){let{accessibilityModalLabel:e,deleteAndCloseConversation:t,flagType:o,flow:l,status:i,modalTitle:n,onClose:a,selectedReason:r,submitButton:c,flagReason:_,showPrimaryAction:u,users:m,blockContext:g}=this.props;return(0,h.jsx)(v.ZP,{accessibilityModalLabel:e,footer:l!==d.Zw.BLOCK?(0,h.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,h.jsx)(s.xu,{flex:"grow",children:(0,h.jsx)(E,{flagReason:_,flow:l})}),(0,h.jsx)(s.xu,{padding:1,children:l===d.Zw.REPORT?(0,h.jsx)(s.zx,{fullWidth:!0,onClick:void 0===_?this.props.onClose:()=>{this.props.onRevert?.()},text:void 0===_?this.props.i18n.bt("Cancel", "Cancel", "cancel form", undefined, true):this.props.i18n.bt("Back", "Back", "previous step in a form", undefined, true)}):null}),(0,h.jsx)(s.xu,{padding:1,children:(0,h.jsx)(b,{flagOptions:this.flagOptions,flow:l,handleClose:this.props.onClose,handleNext:()=>{this.props.onNext?.()},selectedReason:r,showPrimaryAction:!!u,submitButton:c})})]}):void 0,heading:n,onDismiss:a,size:"md",children:(0,h.jsx)(s.xu,{children:l===d.Zw.BLOCK?(0,h.jsx)(x,{blockContext:g,deleteAndCloseConversation:t,flagReason:_,flagType:o,onClose:a,selectedReason:r,status:i,users:m}):this.renderContent()})})}}function w(e){let t=(0,_.ZP)();return(0,h.jsx)(C,{...e,i18n:t})}var k=o(794230),z=o(600147);let j="policies";function D({aggregatedPinDataId:e,didItDataId:t,onClose:o,pinId:n,username:a,users:c}){let u=(0,_.ZP)(),[g,p]=(0,l.useState)([]),[f,y]=(0,l.useState)(),[A,x]=(0,l.useState)(),b=(0,i.useDispatch)(),E=(e,t,o,l,i)=>b((0,z.Th)(e,t,o,l,i)),{flow:T,modalTitle:P,selectedReason:v,setFlow:I,setModalTitle:C,setSelectedReason:D,setStatus:R,status:L}=(0,r.d)(),S=()=>{if(T===d.Zw.REPORT)switch(A){case"attacks":return u.bt("What's going on?", "What's going on?", "title for report content flow", undefined, true);case j:return u.bt("What's wrong with this try?", "What's wrong with this Try?", "title for report content flow", undefined, true);case"IP":return u.bt("Intellectual property", "Intellectual Property", "title for report content flow for IP complaints", undefined, true);default:return u.bt("What's wrong with this try?", "What's wrong with this Try?", "title for the report content flow", undefined, true)}else if(T===d.Zw.END&&g.includes("notUseful"))return u.bt("Thanks for letting us know.", "Thanks for letting us know!", "title at end of report flow when content is not useful", undefined, true);return""};(0,l.useEffect)(()=>{C(S())},[g,T,A]);let O=(0,h.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{if(R(d.qb.PROCESSING),"ignoreThisPin"===v)I(d.Zw.BLOCK),R(d.qb.STARTED);else{let o=[...g,v];p(o),E(e,o,t,f,a),g.includes("notUseful")?I(d.Zw.END):I(d.Zw.BLOCK),R(d.qb.STARTED)}},text:u.bt("Report content", "Report content", "button to report content", undefined, true)});return(0,h.jsx)(w,{accessibilityModalLabel:u.bt("Report conversation", "Report conversation", "Pin.DidIt.Report", undefined, true),blockContext:e??"",content:"IP"===A?(0,h.jsx)(s.xu,{justifyContent:"center",mdDisplay:"flex",children:(0,h.jsxs)(s.xu,{mdColumn:9,children:[(0,h.jsx)(s.xu,{marginStart:2,padding:2,children:(0,h.jsx)(s.xv,{align:"center",color:"default",weight:"bold",children:u.bt("If you’ve found content that you believe violates your intellectual property, you can fill in our copyright complaint form.", "If you’ve found content that you believe violates your intellectual property, you can fill out our copyright complaint form.", "explanation of IP complaint process", undefined, true)})}),(0,h.jsx)(s.xu,{padding:2,children:(0,h.jsx)(s.ZP,{color:"red",href:(0,k.Z)(m.GEi,{pin_id:n,user_did_it_id:t}),target:"blank",text:u.bt("File a report", "File a report", "link to DMCA form", undefined, true)})})]})}):null,flagOptionsConfig:{__default:[{text:u.bt("It isn't useful or relevant", "It isn't useful or relevant", "tried-it reporting flow", undefined, true),value:"ignoreThisPin",isTerminalReason:!0,category:"ignoreThisPin"},{text:u.bt("It shouldn't be on Pinterest", "It shouldn't be on Pinterest", "tried-it reporting flow", undefined, true),value:j,isTerminalReason:!1},{text:u.bt("This is spam", "It's spam", "tried-it reporting flow", undefined, true),value:"spam",isTerminalReason:!0,category:"spam"},{text:u.bt("It's my intellectual property", "It's my intellectual property", "tried-it reporting flow", undefined, true),isTerminalReason:!1,value:"IP"}],ignoreThisPin:[],policies:[{text:u.bt("It's sexually explicit", "It's sexually explicit", "tried-it reporting flow", undefined, true),value:"nudity",isTerminalReason:!0,category:"nudity"},{text:u.bt("It's self-harm", "It's self-harm", "an option on tried-it reporting flow", undefined, true),value:"self-harm",isTerminalReason:!0,category:"self-harm"},{text:u.bt("It's hate speech", "It's hate speech", "tried-it reporting flow", undefined, true),value:"hate-speech",isTerminalReason:!0,category:"hate-speech"},{text:u.bt("It's harassment or bullying", "It's harassment or bullying", "tried-it reporting flow", undefined, true),value:"attacks",isTerminalReason:!1,category:"attacks"},{text:u.bt("It's graphic violence", "It's graphic violence", "tried-it reporting flow", undefined, true),value:"gore",isTerminalReason:!0,category:"graphic-violence"}],attacks:[{text:u.bt("It's a photo of me or my child", "It's a photo of me or my child", "tried-it reporting flow", undefined, true),value:"harassingMeOrMyChild",isTerminalReason:!0,category:"attacks"},{text:u.bt("It identifies and attacks me or someone I know", "It identifies and attacks me or someone I know", "tried-it reporting flow", undefined, true),value:"harassingMeOrAFriend",isTerminalReason:!0,category:"attacks"},{text:u.bt("Something else", "Something else", "tried-it reporting flow", undefined, true),value:"harassingOther",isTerminalReason:!0,category:"attacks"}],IP:[],spam:[]},flagReason:A,flagType:d.Vm.DID_IT,flow:T,modalTitle:P,onClose:o(!0),onNext:()=>{x(v),p([...g,v]),D()},onRevert:()=>{let e=g[g.length-1],t=g.slice(0,-1);D(e),x(t[t.length-1]),p(t),y(),R(void 0===e?d.qb.STARTED:d.qb.SELECTED)},onSelectReason:(e,t,o)=>{e&&(D(t),R(d.qb.SELECTED),y(o))},selectedReason:v,showPrimaryAction:"IP"!==A,status:L,submitButton:O,users:c})}},174798:(e,t,o)=>{o.d(t,{Vm:()=>s,Zw:()=>l,qb:()=>i});let l={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},i={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},s={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},997138:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(883119),i=o(356997),s=o(898781),n=o(785893);let a=({isQuestion:e,name:t,size:o,src:a})=>{let r=(0,s.ZP)();return(0,n.jsxs)(l.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,n.jsx)(i.qE,{name:t,size:o,src:a}),e&&(0,n.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,n.jsx)(l.xu,{position:"absolute",children:(0,n.jsx)(l.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"dark",icon:"speech"})}),(0,n.jsx)(l.xu,{position:"absolute",children:(0,n.jsx)(l.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"light",icon:"question-mark",size:8})})]})]})}},44715:(e,t,o)=>{o.d(t,{Z:()=>ei});var l=o(883119),i=o(667294),s=o(702664),n=o(473727),a=o(964569),r=o(129274),d=o(923764),c=o(997138),_=o(898781),u=o(785893);let m=({color:e,isMarkedHelpful:t})=>{let o=(0,_.ZP)();return(0,u.jsx)(l.JO,{accessibilityLabel:o.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var h=o(28754),g=o(541776),p=o(407043),f=o(499128),y=o(773285),A=o(343341),x=o(19121),b=o(717615),E=o(845772),T=o(231947),P=o(139405),v=o(600147),I=o(550393),C=o(492583),w=o(116674);let k=({aggregatedPinDataId:e,anchor:t,closeupAttributionId:o,comment:n,dismiss:a,isOpen:r,isReply:d,onEdit:c,onShowBlockUserModal:m,parentId:k,pinnerId:z,pinId:j})=>{let D=(0,_.ZP)(),R=(0,s.useDispatch)(),{logContextEvent:L}=(0,p.v)(),{showToast:S}=(0,A.F9)(),{checkExperiment:O}=(0,y.F)(),{anyEnabled:M}=O("web_m10n_business_access_orbac_ga"),{toggleAggregatedCommentHighlight:G}=(0,P.nf)(),N=(0,h.Z)(),[Z,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{U(r)},[r,U]);let B=(0,x.Z)(),F=(0,b.Z)(),H=(0,E.Z)(),{reportComment:W}=(0,w.f)(),$=o??"",q=n.user.id,K=B.isAuth&&$===B.id,V="userdiditdata"===n.type,Y=(0,T.q6)(B,z??"",M?F:{}),X=(0,T.D3)(B,q,M?F:{}),J=(0,T.D3)(B,$,M?F:{}),Q=B.isAuth&&(n.tagged_users||[]).filter(({id:e})=>e===B.id).length>0,ee=async e=>{try{await G({aggregatedCommentId:n.id,pinId:j,isHighlighted:e}),L({event_type:101,component:13712,element:e?12475:12474,view_type:220,aux_data:{creator_id:q}}),S(({hideToast:t})=>(0,u.jsx)(f.ZP,{onHide:t,primaryAction:{accessibilityLabel:D.bt("Undo comment highlight or comment highlight removal", "Undo comment highlight or comment highlight removal", "unifiedComment.unifiedCommentContainer.commentHighlightToast.a11yUndoButton", undefined, true),label:D.bt("Undo", "Undo", "unifiedComment.unifiedCommentContainer.commentHighlightToast.undoButton", undefined, true),size:"lg",onClick:()=>{G({aggregatedCommentId:n.id,pinId:j,isHighlighted:!e})}},text:e?D.bt("Highlight removed", "Highlight removed", "unifiedComment.unifiedCommentContainer.popover.commentHighlightRemovalToast", undefined, true):D.bt("Comment highlighted", "Comment highlighted", "unifiedComment.unifiedCommentContainer.popover.commentHighlightToast", undefined, true)}))}catch(e){e.message&&S(({hideToast:t})=>(0,u.jsx)(f.ZP,{onHide:t,text:e.message,type:"error"}))}},et=e=>()=>void ee(e),eo=e=>()=>{e(),a(!0)};if(!r)return null;let el={highlight:D.bt("Highlight", "Highlight", "Highlight a community post or comment", undefined, true),removeHighlight:D.bt("Remove highlight", "Remove highlight", "Remove highlight for a community post or comment", undefined, true),edit:D.bt("Edit", "Edit", "Edit a community post or comment", undefined, true),delete:D.bt("Delete", "Delete", "Delete a community post or comment", undefined, true),reportContent:D.bt("Report this content", "Report this content", "Report a community post or comment", undefined, true),removeMention:D.bt("Remove @mention", "Remove @mention", "closeup.activityItem.removeMention", undefined, true),reportForNetzDG:D.bt("Report comment for NetzDG", "Report comment for NetzDG", "commentOverflowMenu.option.reportForNetzDG", undefined, true),blockUser:D.bt("Block user", "Block user", "closeup.activityItem.blockUser", undefined, true)},ei=new l.Ry(1);return Z&&(0,u.jsx)(l.xu,{onFocus:e=>e.stopPropagation(),children:(0,u.jsx)(l.Lt,{anchor:t,disableMobileUI:!0,id:"comment-overflow-popover",idealDirection:"down",isWithinFixedContainer:!1,onDismiss:()=>a(!1),zIndex:ei,children:B.isAuth?(0,u.jsxs)(i.Fragment,{children:[!d&&K&&!n.highlighted_by_pin_owner&&!V&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:eo(et(!1)),option:{label:el.highlight,value:el.highlight}}),!d&&K&&n.highlighted_by_pin_owner&&!V&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-highlight",onSelect:eo(et(!0)),option:{label:el.removeHighlight,value:el.removeHighlight}}),X&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:eo(c),option:{label:el.edit,value:el.edit}}),(X||J)&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:eo(()=>{"aggregatedcomment"===n.type?N({aggregatedCommentId:n.id,aggregatedPinId:e??"",feedType:d?"aggregatedComments":C.Z.UNIFIED_COMMENTS,orbacSubjectId:H,parentId:k,type:d?g.Rv.REPLY_TO_AGGREGATED:g.Rv.TOP,updateParentCommentCount:!0,pinId:j}):R((0,v.lg)({aggregatedPinDataId:e??"",feedType:C.Z.UNIFIED_COMMENTS,id:n.id,isOwnedByMe:!0,pinId:j??"",username:n.user.username,updateParentDidItCount:!0}))}),option:{label:el.delete,value:el.delete}}),!X&&!Y&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:eo(()=>{W(n.id,k,n.type)}),option:{label:el.reportContent,value:el.reportContent}}),Q&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-mention",onSelect:eo(()=>{R((0,I.Q)(n.id)),S(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:D.bt("@mention removed", "@mention removed!", "unifiedComment.unifiedCommentContainer.mentionRemovalToast", undefined, true)}))}),option:{label:el.removeMention,value:el.removeMention}}),!X&&(0,u.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-block-user",onSelect:eo(()=>{U(!1),m(),L({component:14349,event_type:9406})}),option:{label:el.blockUser,value:el.blockUser}})]}):(0,u.jsx)(l.Lt.Link,{dataTestId:"dropdown-item-report-for-netzdg",href:"https://policy.pinterest.com/de/netzdg/",option:{label:el.reportForNetzDG,value:el.reportForNetzDG}})})})};var z=o(600636),j=o(133758);let D={containerStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)"},helpfulLabelStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)",right:"50%",transform:"translateX(50%)"},helpfulStyle:{backgroundImage:`url(${z})`},lovedLabelStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)",left:"50%",transform:"translateX(-50%)"},lovedStyle:{backgroundImage:`url(${j})`}},R=({setHelpful:e,setLoved:t})=>{let o=(0,_.ZP)(),[s,n]=(0,i.useState)(!1),[a,r]=(0,i.useState)(!1),d=e=>()=>{n(e)},c=e=>()=>{r(e)};return(0,u.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:D.containerStyle},"data-test-id":"comment-reaction-tray-background",display:"flex",height:25,justifyContent:"center",padding:1,position:"relative",rounding:"pill",width:43,children:[(0,u.jsx)(l.iP,{fullHeight:!0,onMouseDown:t,onMouseEnter:c(!0),onMouseLeave:c(!1),children:(0,u.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:D.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:18,marginBottom:a?3:1,position:"absolute",width:18,children:a&&(0,u.jsx)(l.xu,{color:"selected",dangerouslySetInlineStyle:{__style:D.lovedLabelStyle},marginTop:-7,paddingX:1,paddingY:1,position:"absolute",rounding:"pill",top:!0,children:(0,u.jsx)(l.xv,{color:"inverse",overflow:"noWrap",size:"100",weight:"bold",children:o.bt("Love", "Love", "comment.button.loved", undefined, true)})})})}),(0,u.jsx)(l.iP,{fullHeight:!0,onMouseDown:e,onMouseEnter:d(!0),onMouseLeave:d(!1),children:(0,u.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:D.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:18,marginBottom:s?3:1,position:"absolute",width:18,children:s&&(0,u.jsx)(l.xu,{color:"selected",dangerouslySetInlineStyle:{__style:D.helpfulLabelStyle},marginTop:-7,paddingX:1,paddingY:1,position:"absolute",rounding:"pill",top:!0,children:(0,u.jsx)(l.xv,{color:"inverse",overflow:"noWrap",size:"100",weight:"bold",children:o.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true)})})})})]})};var L=o(311716),S=o(559113),O=o(356997);let M={helpfulStyle:{backgroundImage:`url(${L})`},lovedStyle:{backgroundImage:`url(${S})`}},G=({response:e})=>{let t=14===e.reaction_type,o=1===e.reaction_type,i=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(l.kC,{alignItems:"center",children:[(0,u.jsx)(l.Tg,{href:`/${e.user.username}/`,children:(0,u.jsxs)(l.kC,{alignItems:"center",children:[(0,u.jsx)(l.xu,{maxWidth:40,children:(0,u.jsx)(O.qE,{accessibilityLabel:"",name:i,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(l.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(l.xv,{color:"inverse",size:"100",weight:"bold",children:i})})]})}),(0,u.jsxs)(l.xu,{alignContent:"end",display:"flex",padding:2,children:[o&&(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:M.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),t&&(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:M.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var N=o(784590);let Z=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],U=({commentId:e,isMarkedHelpfulByMe:t,isLovedByMe:o,isTry:s})=>{let n=(0,x.Z)(),a=(0,N.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:Z}}),r=a.data?.filter(e=>e.user.id!==n.id);if((o||t)&&r){let t={id:e,reaction_type:o?1:14,user:{first_name:n.isAuth?n.firstName:"",full_name:n.isAuth?n.fullName:"",id:n.isAuth?n.id:"",image_medium_url:n.isAuth?n.imageMediumUrl:"",is_private_profile:!!n.isAuth&&!!n.isPrivateProfile,username:n.isAuth?n.username:""}};r=[t,...r]}let d=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let{current:e}=d,t=()=>{a.isFetching||(a.isAtEnd?e?.removeEventListener("scroll",t):a.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[a]),(0,u.jsx)(l.xu,{ref:d,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:r?.map(e=>u.jsx(l.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:u.jsx(G,{response:e})},e.id))})};var B=o(814197);let F=({commentId:e,dismissReactionList:t,helpfulCount:o,isMarkedHelpfulByMe:s,isLovedByMe:n,isReactionListOpen:a,isTry:r,lovedCount:d,onReactionCountHover:c,onToggleHelpful:m,onToggleLove:h})=>{let g=(0,_.ZP)(),p=(0,i.useRef)(),[f,y]=(0,i.useState)(!1),A=!1,x=(d||0)+(o||0);s&&n&&(x-=1);let b=e=>()=>{y(e)},E=()=>{A=!0,c()},T=()=>{A=!1,setTimeout(()=>{A||t()},1e3)},P=(0,u.jsx)(l.xu,{"data-test-id":"comment-reaction-container-entry-point",children:f?(0,u.jsx)(l.iP,{onMouseDown:b(!1),onMouseLeave:b(!1),children:(0,u.jsx)(R,{setHelpful:m(!0),setLoved:h(!0)})}):(0,u.jsx)(l.iP,{onMouseEnter:b(!0),children:(0,u.jsx)(l.JO,{accessibilityLabel:g.bt("React", "React", "comment.actionbar.react", undefined, true),color:"subtle",icon:"heart-outline",size:16})})});return(0,u.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[s||n?(0,u.jsx)(l.iP,{onMouseDown:()=>{m(!1)(),h(!1)()},children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${n?S:L})`}},"data-test-id":n?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:16,width:16})}):P,x>0&&(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(l.iP,{onMouseEnter:E,onMouseLeave:T,children:(0,u.jsx)(l.xu,{ref:p,"data-test-id":"comment-reaction-container-reaction-count",children:(0,u.jsx)(l.xv,{color:"subtle",inline:!0,size:"200",weight:"bold",children:x})})}),a&&(0,u.jsx)(l.mh,{zIndex:B.lI,children:(0,u.jsx)(l.J2,{anchor:p.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,u.jsx)(l.iP,{onMouseEnter:E,onMouseLeave:T,children:(0,u.jsx)(U,{commentId:e,isLovedByMe:n,isMarkedHelpfulByMe:s,isTry:r})})})})]})]})};var H=o(513578),W=o(349700);function $(e){let{featuredCommentId:t,parentId:o,parentType:n,isDesktop:a,isLoading:r,isReadOnly:d,openOverflowMenu:c,replyingToCommentId:m,toggleHelpful:h,toggleLike:g,toggleReplyComposer:p,isORBACProfileManager:f,isVideo:y,storyPinDataId:A,pinId:x,closeupAttributionId:b,aggregatedPinDataId:E,closeupAttributionUsername:T,pinnerId:v,reactionListCommentId:I,showReactionListForComment:w,viewParameter:k}=e,z=(0,_.ZP)(),j=(0,P.lV)(),D=(0,s.useSelector)(({feeds:e})=>{let t=e[`${C.Z.AGGREGATED_COMMENT_REPLIES}:${o}`]||[],l=e[`${C.Z.AGGREGATED_COMMENTS}:${o}`]||[],i=t.concat(l);return i.reduceRight((e,{id:t})=>{let o=j[t];return o?[...e,o]:e},[])}),[R,L]=(0,i.useState)(1),S=R===D.length;return(0,u.jsxs)(i.Fragment,{children:[D.length>1&&(0,u.jsx)(l.iP,{onTap:()=>{L(S?0:D.length)},children:(0,u.jsxs)(l.xu,{marginBottom:4,children:[(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(l.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:S?z.bt("Hide replies", "Hide replies", "comment.button.hideReplies", undefined, true):(0,W.nk)(z.nbt(["View {{ commentCount }} reply", "View {{ commentCount }} replies"], D.length, "comment.button.showReplies", true),{commentCount:D.length})})]})}),(0,u.jsx)(ei,{aggregatedPinDataId:E,closeupAttributionId:b,closeupAttributionUsername:T,comments:D.slice(0,R),commentsDisabled:!1,featuredCommentId:t,gapSize:2,isDesktop:a,isLoading:r,isORBACProfileManager:f,isReadOnly:d,isVideo:y,openOverflowMenu:c,parentId:o,parentType:n,pinId:x,pinnerId:v,reactionListCommentId:I,replyingToCommentId:m,showReactionListForComment:w,storyPinDataId:A,toggleHelpful:h,toggleLike:g,toggleReplyComposer:p,userAvatarSize:"sm",viewParameter:k})]})}var q=o(264322),K=o(298361),V=o(584595),Y=o(780280),X=o(379725),J=o(664569),Q=o(94089),ee=o(737849),et=o(90326);function eo(e){let t;let{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:E,comment:I,featuredCommentId:C,isDesktop:w,isReadOnly:z,isVideo:j,openOverflowMenu:D,toggleReplyComposer:R,parentId:L,parentType:S=J.o.pin,pinId:O,storyPinDataId:M,replyingToCommentId:G,showReactionListForComment:N,toggleHelpful:Z,toggleLike:U,userAvatarSize:B,isORBACProfileManager:eo,pinnerId:el,reactionListCommentId:ei,viewParameter:es}=e,{user:{id:en,first_name:ea,id:er,image_medium_url:ed,username:ec},id:e_,image_signatures:eu,is_translatable:em,comment_count:eh,helpful_count:eg,tags:ep=[]}=I,[ef,ey]=(0,i.useState)(!1),eA=ef&&I.translatedText||I.text,ex=!em||""===I.translatedText,eb=!1,eE=0,eT=!1,eP=!!I.marked_helpful_by_me,ev=[I.user],eI="",eC=new Date;"aggregatedcomment"===I.type?(eb=I.highlighted_by_pin_owner,eE=I.reaction_counts[1],eT=I.reaction_by_me>0,ev.push(...I.tagged_users),eI=`${ec} ${eA}`,eC=new Date(I.created_at)):(eE=I.like_count,eT=I.liked_by_me,t=(I.images[0]||{})["150x150"],eI=`${ec} ${I.details}`,eC=new Date(I.done_at));let ew=(0,_.ZP)(),ek=(0,x.Z)(),{logContextEvent:ez}=(0,p.v)(),{country:ej,isBot:eD}=(0,Y.B)(),{checkExperiment:eR}=(0,y.F)(),{showToast:eL}=(0,A.F9)(),eS=(0,s.useDispatch)(),eO=(0,i.useRef)(),{anyEnabled:eM}=eR("web_m10n_business_access_orbac_ga"),eG=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(ej),eN=1===I.comment_tag,eZ=(0,b.Z)(),eU=eM?(0,T.lJ)(ek,eZ):"",{nativeEngagementsHiddenForUser:eB}=(0,Q.G)(),{aggregatedCommentsHiddenForUser:eF,translateAggregatedComment:eH,updateAggregatedComment:eW}=(0,P.nf)(),e$=(0,a.Z)(),eq="userdiditdata"===I.type,eK=(0,K.Z)(),eV=em&&eR("dweb_comment_translations").anyEnabled,eY=eq&&eR("dweb_photo_commenting").anyEnabled,eX=eq&&w&&eR("dweb_photo_comment_replies").anyEnabled,eJ=eq&&!w&&eR("mweb_photo_comment_replies").anyEnabled,eQ=eq&&eR("mweb_photo_commenting").anyEnabled,e0=!z&&!eo&&eq,e1=e0&&w&&eR("dweb_photo_comment_reactions").anyEnabled,e9=e0&&!w&&eR("mweb_photo_comment_reactions").anyEnabled,e6=[{offset:0,length:ec.length,color:"darkGray"},...ep.map(e=>({...e,offset:(e.offset||0)+ec.length+1,color:"shopping"}))],e8={SHOW_TRANSLATION:ew.bt("Show translation", "Show translation", "comment.translateButton.showTranslation", undefined, true),TRANSLATING:ew.bt("Translating...", "Translating...", "comment.translateButton.translating", undefined, true),SHOW_ORIGINAL:ew.bt("Show original", "Show original", "comment.translateButton.showOriginal", undefined, true)},e4=(0,i.useRef)(e8.SHOW_TRANSLATION),[e3,e7]=(0,i.useState)(!1),[e2,e5]=(0,i.useState)(!1),[te,tt]=(0,i.useState)(!1),[to,tl]=(0,i.useState)(!1),[ti,ts]=(0,i.useState)(!1),[tn,ta]=(0,i.useState)(!1),[tr,td]=(0,i.useState)(g.A9.NONE),tc=e=>()=>{e5(e)};(0,i.useEffect)(()=>{eV&&ez({event_type:10416,view_type:3,view_parameter:es,component:"pin"===S?13696:13697})},[ez,S,eV,es]),(0,i.useEffect)(()=>{eh>0&&!eD&&eS((0,X.U)("aggregatedcomment"===I.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:e_,redux_normalize_feed:!0}}))},[I.type,e_]);let t_=S.toLowerCase()===J.o.aggregatedComment.toLowerCase()||S.toLowerCase()===J.n.didIt.toLowerCase(),tu=Object.values(J.n).includes(S.toLowerCase()),tm=I.user.first_name||"",th=async({contentMarkdown:e,force:t,tags:o})=>{let l,i;tl(!0);let s=I.id;if(t_&&(l=S.toLowerCase()===J.n.didIt,s=L,i=I.id),s)try{await e$({force:t,fromUnifiedComment:!0,objectType:eq||l?J.o.didIt:J.o.aggregatedComment,objectId:s,orbacSubjectId:eU,tags:o,text:e,replyToCommentId:i})}catch(e){if([V.ky,V.LJ].includes(e.code)&&w)return td(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),tl(!1),!1}return R&&R(void 0),tl(!1),!0},tg=async({contentMarkdown:e,force:t,tags:o})=>{tt(!0);try{eY?await eS((0,v.IU)({id:I.id,details:e,pinId:O??"",image_signatures:eu??[]})):await eW({commentId:I.id,force:t,orbacSubjectId:eU,tags:o,text:e})}catch(e){if([V.ky,V.LJ].includes(e.code)&&w)return td(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),tt(!1),!1}return e5(!1),tt(!1),!0},tp=e=>()=>{e7(e),ta(e),e||ez({component:14349,event_type:9408})},tf=()=>{td(g.A9.NONE)},ty=()=>{ef||I.translatedText||eH(I.id),ef||e4.current!==e8.SHOW_TRANSLATION?ef&&e4.current===e8.SHOW_ORIGINAL&&ez({event_type:10418,view_type:3,view_parameter:es,component:"pin"===S?13696:13697}):ez({event_type:10417,view_type:3,view_parameter:es,component:"pin"===S?13696:13697}),ey(!ef)};(0,i.useEffect)(()=>{ef&&ex&&(ey(!ef),eL(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:ew.bt("Error – couldn't translate", "Error - couldn't translate", "comment.couldNotTranslate.toast", undefined, true),type:"error"})))},[ef,ex]),ef?e4.current=I.translatedText?e8.SHOW_ORIGINAL:e8.TRANSLATING:e4.current=e8.SHOW_TRANSLATION;let tA=t&&(0,u.jsx)(l.xu,{marginBottom:!w&&eQ?2:4,marginTop:1,children:(0,u.jsx)(l.zd,{height:150,rounding:2,wash:!0,width:150,children:(0,u.jsx)(l.Ee,{alt:t.url??"",color:"#efefef",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""},t.url)})});return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(l.$j,{accessibilityLabel:"Loading comment",show:te}),!e2&&!te&&(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(l.xu,{marginEnd:2,children:(0,u.jsx)(n.rU,{to:`/${ec}/`,children:(0,u.jsx)(c.Z,{isQuestion:eN,name:ea||ec||"",size:B,src:ed??""})})}),(0,u.jsxs)(l.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(l.kC,{justifyContent:"between",children:[(0,u.jsx)(l.kC.Item,{minWidth:0,children:(0,u.jsxs)(l.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!w&&eQ&&tA,(0,u.jsx)(q.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:ev,tags:e6,text:eI}),(w||!w&&!eQ)&&tA,eV&&(0,u.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(l.iP,{onTap:()=>ty(),children:(0,u.jsx)(l.xv,{color:"subtle",size:"300",weight:"bold",children:e4.current})})})]})}),C===e_&&(0,u.jsx)(l.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eb&&(0,u.jsx)(l.xu,{marginBottom:3,marginTop:4,children:(0,u.jsx)(l.xv,{size:"100",children:(0,W.nk)(ew.bt("Highlighted by @{{ closeupAttributionUsername }}", "Highlighted by @{{ closeupAttributionUsername }}", "comment.highlighted.label", undefined, true),{closeupAttributionUsername:E})})}),(!z||eG)&&(0,u.jsxs)(l.xu,{alignItems:"center",display:"flex",height:25,justifyContent:"between",position:"relative",children:[(0,u.jsxs)(l.kC,{alignItems:"center",gap:{row:5,column:0},children:[!z&&(0,u.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",children:eK(eC,!0)})}),!z&&(!eo||eM)&&(!eq||eX||eJ)&&(0,u.jsx)(l.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(l.iP,{onTap:()=>{R&&R(I,L,S)},children:(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:ew.bt("Reply", "Reply", "comment.button.reply", undefined, true)})})}),!z&&!eo&&(!eq||e1||e9)&&(w?(0,u.jsx)(F,{commentId:e_,dismissReactionList:()=>{N(void 0)},helpfulCount:eg,isLovedByMe:eT,isMarkedHelpfulByMe:eP,isReactionListOpen:ei===e_,isTry:eq,lovedCount:eE,onReactionCountHover:()=>{N(e_),ez({event_type:9906,component:"pin"===S?13696:13697,view_type:3,view_parameter:es})},onToggleHelpful:e=>()=>{eP!==e&&Z(e_,!e,eq)()},onToggleLove:e=>()=>{eT!==e&&U(e_,!e,eq)()}}):(0,u.jsxs)(l.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(l.hU,{accessibilityLabel:ew.bt("Like", "Like", "comment.button.like", undefined, true),icon:"heart",iconColor:eT?"red":"gray",onClick:U(e_,eT,eq),size:"xs"}),eE>0&&(0,u.jsx)(l.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:eE})})]})),!(ek.id===er&&eN)&&(!eo||eM)&&(0,u.jsx)(l.xu,{ref:eO,"data-test-id":"comment-more-options",children:(0,u.jsx)(l.hU,{accessibilityLabel:ew.bt("More", "More", "comment.button.more", undefined, true),icon:"ellipsis",iconColor:"gray",onClick:()=>{w?e7(!e3):D&&D(I)},size:"xs"})})]}),!z&&!eo&&!w&&(!eq||e9)&&(0,u.jsx)(l.xu,{marginStart:6,children:(0,u.jsx)(l.iP,{fullWidth:!1,onTap:Z(e_,eP,eq),children:(0,u.jsxs)(l.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(m,{color:"subtle",isMarkedHelpful:eP}),(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:ew.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true)}),eg>0&&(0,u.jsx)(l.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:eg})})]})})})]})]})]}),w&&(0,u.jsxs)(i.Fragment,{children:[e2&&(0,u.jsx)(l.xu,{marginTop:3,children:(0,u.jsx)(H.Z,{commentWarningModalState:tr,dismissCommentWarningModal:tf,initialTags:I.tags,initialText:"aggregatedcomment"===I.type?I.text:I.details,isReplyEditor:tu,objectType:J.o.aggregatedComment,onAddItem:tg,onCancelItem:tc(!1),postedPhoto:t,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})}),G===e_&&(0,u.jsx)(l.xu,{marginStart:t_?0:12,marginTop:3,children:(0,u.jsx)(H.Z,{commentWarningModalState:tr,dismissCommentWarningModal:tf,initialTags:t_?[{offset:0,object_id:en,length:tm.length,tag_type:1}]:[],initialText:t_?`${tm} `:"",isReplyEditor:tu,objectType:J.o.aggregatedComment,onAddItem:th,onCancelItem:()=>{R&&R()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})})]}),(eh>0||to)&&(0,u.jsx)(l.xu,{marginStart:12,marginTop:4,children:(0,u.jsx)($,{aggregatedPinDataId:o,closeupAttributionId:h,closeupAttributionUsername:E,featuredCommentId:C,isDesktop:w,isLoading:to,isORBACProfileManager:eo,isReadOnly:z,isVideo:j,openOverflowMenu:D,parentId:e_,parentType:I.type,pinId:O,pinnerId:el,reactionListCommentId:ei,replyingToCommentId:G,showReactionListForComment:N,storyPinDataId:M,toggleHelpful:Z,toggleLike:U,toggleReplyComposer:R,viewParameter:es})}),w&&(!z||eG)&&(0,u.jsx)(k,{aggregatedPinDataId:o,anchor:eO.current,closeupAttributionId:h,comment:I,dismiss:e=>{e7(!1),e||ez({component:14349,event_type:10128})},isOpen:e3,isReply:t_,onEdit:tc(!0),onShowBlockUserModal:tp(!0),parentId:L,pinId:O,pinnerId:el}),ti&&(0,u.jsx)(r.N,{children:(0,u.jsx)(d.Z,{aggregatedPinDataId:o,didItDataId:e_,onClose:e=>()=>{ts(!e)},pinId:O??"",username:ec,users:[I.user]})}),tn&&(0,u.jsx)(ee.Z,{firstName:ea??"",onBlockUser:()=>{eS((0,et.Ge)({id:en,orbacSubjectId:eU,blockSource:"comment",blockContext:e_,logContextEvent:ez})),eF(en),eB(en),ez({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:ek.isAuth?ek.id:null}}),ez({component:14349,event_type:9407}),ta(!1),eL(({hideToast:e})=>(0,u.jsx)(f.ZP,{onHide:e,text:(0,W.nk)(ew.bt("You've blocked {{ username }}", "You've blocked {{ username }}", "comment.blockAuthor.toast", undefined, true),{username:ec}).join("")}))},onClearModal:tp(!1)})]})}var el=o(366428);function ei(e){let t;let{aggregatedPinDataId:o,comments:i,commentsDisabled:s,featuredCommentId:n,gapSize:a=6,isDesktop:r,isLoaded:d=!1,isLoading:c=!1,isReadOnly:m,openOverflowMenu:h,toggleReplyComposer:g,parentId:p,parentType:f,replyingToCommentId:y,toggleHelpful:A,toggleLike:x,userAvatarSize:b,isORBACProfileManager:E,isVideo:T,storyPinDataId:P,pinId:v,closeupAttributionId:I,closeupAttributionUsername:C,pinnerId:w,showReactionListForComment:k,reactionListCommentId:z,viewParameter:j}=e,D=(0,_.ZP)();return(t=P?"story":T?"video":"pin",s)?(0,u.jsx)(l.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",width:"100%",children:(0,u.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:D.bt("Comments are turned off for this Pin", "Comments are turned off for this Pin", "commentThread.disabledState.message", undefined, true)})}):i.length>0?(0,u.jsxs)(l.kC,{dataTestId:"aggregated-comment-list",direction:"column",gap:{row:0,column:a},maxHeight:"100%",width:"100%",children:[i.map((e,i)=>(0,u.jsx)(el.F,{componentType:"pin"===f?13696:13697,impressionAuxFields:{commentId:e.id,pinId:v,pinOwnerUserId:I,pinType:t,parentId:p,parentType:f,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:i,viewType:r?3:98,children:({impressionTrackerRef:t})=>(0,u.jsx)(l.xu,{ref:t,"data-test-id":"commentThread-comment",children:(0,u.jsx)(eo,{aggregatedPinDataId:o,closeupAttributionId:I,closeupAttributionUsername:C,comment:e,featuredCommentId:n,isDesktop:r,isORBACProfileManager:E,isReadOnly:m,isVideo:T,openOverflowMenu:h,parentId:p,parentType:f,pinId:v,pinnerId:w,reactionListCommentId:z,replyingToCommentId:y,showReactionListForComment:k,storyPinDataId:P,toggleHelpful:A,toggleLike:x,toggleReplyComposer:g,userAvatarSize:b,viewParameter:j})})},e.id)),(0,u.jsx)(l.$j,{accessibilityLabel:D.bt("Comments loading", "Comments loading", " - ", undefined, true),show:c})]}):(0,u.jsxs)(l.xu,{alignSelf:"center",width:"100%",children:[(0,u.jsx)(l.$j,{accessibilityLabel:D.bt("Comments loading", "Comments loading", " - ", undefined, true),show:c}),d&&(0,u.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:D.bt("No comments yet. Add one to start the conversation.", "No comments yet! Add one to start the conversation.", "commentThread.emptyState.message", undefined, true)})]})}},513578:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(667294),i=o(995228),s=o(785893);let n=(0,l.lazy)(()=>Promise.all([o.e(11177),o.e(58491),o.e(27328)]).then(o.bind(o,778072)));function a(e){return(0,s.jsx)(i.Z,{fallback:null,children:(0,s.jsx)(n,{...e})})}},512465:(e,t,o)=>{o.d(t,{Z:()=>m,w:()=>h});var l=o(349700);let i=e=>e.bt("{{ first }}", "{{ first }}", "Generic message that lists 1 item", undefined, true),s=e=>e.bt("{{ first }} and {{ second }}", "{{ first }} and {{ second }}", "Generic message that lists 2 items", undefined, true),n=e=>e.bt("{{ first }}, {{ second }} and {{ third }}", "{{ first }}, {{ second }} and {{ third }}", "Generic message that lists 3 items", undefined, true),a=e=>e.bt("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}", "{{ first }}, {{ second }}, {{ third }} and {{ fourth }}", "Generic message that lists 4 items", undefined, true),r=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}", "Generic message that lists 5 items", undefined, true),d=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}", "Generic message that lists 6 items", undefined, true),c=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}", "Generic message that lists 7 items", undefined, true),_=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others", "Generic message that lists more than 6 items", undefined, true),u=e=>e.bt("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others", "{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others", "Generic message that lists more than 7 items", undefined, true);function m(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(s(t),o);case 3:return(0,l.nk)(n(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(d(t),o);default:return(0,l.nk)(_(t),o)}}function h(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(s(t),o);case 3:return(0,l.nk)(n(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(d(t),o);case 7:return(0,l.nk)(c(t),o);default:return(0,l.nk)(u(t),o)}}},81226:(e,t,o)=>{o.d(t,{Z:()=>l});function l(e){let t=Math.round(e/1e3),o=t%60;return Math.floor(t/60)+":"+(o<10?"0":"")+o}},311541:(e,t,o)=>{o.d(t,{Z:()=>i});var l=o(667294);function i(e,t){let o=(0,l.useRef)([]),[i,s]=(0,l.useState)(),[n,a]=(0,l.useReducer)(i??(()=>t),t),r=(0,l.useCallback)(t=>{i?a(t):(o.current.length||e().then(e=>{s(()=>e.default)}),o.current=[...o.current,t])},[e,i]);return(0,l.useEffect)(()=>{i&&(o.current.forEach(a),o.current=[])},[i]),[n,r]}},869899:(e,t,o)=>{o.d(t,{r:()=>x,K:()=>A});var l=o(667294),i=o(425288),s=o(773285),n=o(784590),a=o(19121),r=o(389643),d=o(339363),c=o(70061);let _=e=>{let t={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&("object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?t[(0,c.Z)(o)]=e[o]:t[(0,c.Z)(o)]=_(e[o]));return t},u=(e,t)=>{let o=[];for(let l in e)l!==t&&o.push({id:l,..._(e[l])});let l=o.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),i=new Map;for(let e of l)i.set(e.id,e);return i},m={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=({dispatch:e,isEnabled:t,state:o})=>{let{orbacVisibility:i,disableProfileChanger:s,headerVisible:n}=o,a=(0,l.useCallback)(o=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:o})},[t,e]),r=(0,l.useCallback)(o=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:o??!i})},[t,e,i]),d=(0,l.useCallback)(o=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:o??!s})},[t,e,s]),c=(0,l.useCallback)(o=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:o??!n})},[t,e,n]);return{changeProfile:a,toggleORBACVisibility:r,toggleDisableProfileChanger:d,toggleHeaderVisibility:c}},p=e=>{let[t,o]=(0,l.useReducer)(h,m),i=g({dispatch:o,isEnabled:e,state:t}),{activeProfile:s,orbacVisibility:n}=t;(0,l.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&o({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,l.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&o({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,l.useEffect)(()=>{(0,d.Nh)("orbacVisibility",n)},[n]),(0,l.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",s)},[s]);let a=(0,l.useCallback)((e,t)=>{o({type:"LOAD_PROFILES",payload:u(e,t)})},[o]);return{state:t,actions:i,receiveProfiles:a}};var f=o(785893);let{Provider:y,useMaybeHook:A}=(0,i.Z)("RoleBasedAccessControlContext"),x=({children:e})=>{let t;let{checkExperiment:o}=(0,s.F)(),i=(0,a.Z)(),d=!!(i.isAuth&&i.isPartner&&o("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:_,receiveProfiles:u}=p(d),{activeProfile:m,headerVisible:h,profiles:g=[]}=c,A=g?Array.from(g.values()):[],x=(0,r.Z)(A),b=!!i.isAuth&&A.length>0&&x,E=i.isAuth?i.id:"",T=i.isAuth?i.username:"",{changeProfile:P,toggleORBACVisibility:v,toggleDisableProfileChanger:I,toggleHeaderVisibility:C}=_;(0,l.useEffect)(()=>{if(d){if("string"==typeof x){P(x);return}m||P(E)}},[x,E,d,P,m]),(0,l.useEffect)(()=>{d&&(b&&!h&&C(!0),!b&&h&&C(!1))},[C,b,d,h,g]);let{data:w}=(0,n.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),k=w?.profiles;i&&i.isAuth&&c.activeProfile===i.id?t={id:i.id,permissions:["OWNER"],user:{username:T,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:m&&c.profiles&&(t=c.profiles.get(m)),(0,l.useEffect)(()=>{k&&u(k,E)},[u,k,E]);let z=c.profiles?Array.from(c.profiles.values()):[];return(0,f.jsx)(y,{value:{profiles:z,headerVisible:c.headerVisible,activeProfile:t,changeProfile:P,toggleORBACVisibility:v,toggleDisableProfileChanger:I,toggleHeaderVisibility:C},children:e})}},717615:(e,t,o)=>{o.d(t,{Z:()=>n});var l=o(773285),i=o(869899),s=o(389643);let n=()=>{let{checkExperiment:e}=(0,l.F)(),t=(0,i.K)(),{activeProfile:o}=t||{},n=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,s.Z)(t?.profiles||[]),{anyEnabled:r}=e("useorbacroutematcher_in_useorbacactingas");return n&&(!r||a)&&o&&(o.viewerMeetsMfaRequirement||(o.permissions||[]).includes("OWNER"))?o:Object.freeze({})}},389643:(e,t,o)=>{o.d(t,{Z:()=>r});var l=o(616550),i=o(53987),s=o(773285),n=o(19121),a=o(350118);let r=e=>{let t=(0,l.TH)(),o=(0,n.Z)(),r=(0,a.S6)(),{anyEnabled:d}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,l.$B)("/:username"),_=c?.params?.username,u=(0,l.$B)("/pin/:id"),m=!!u?.params?.id&&r(u.params.id)?.pinner?.id;if((0,i.ej)(t))return!1;if((0,i.RU)(t))return!0;if((0,i.mY)(t))return d;let h=e.concat(o.isAuth?{user:{username:o.username},id:o.id}:{}).find(e=>{let{user:t={},id:o}=e||{},{username:l}=t;return(!!l&&!!_||!!m&&!!o)&&(l===_||m===o)});return!!h&&h.id}},845772:(e,t,o)=>{o.d(t,{Z:()=>n});var l=o(19121),i=o(717615),s=o(231947);let n=()=>{let e=(0,l.Z)(),t=(0,i.Z)(),o=(0,s.lJ)(e,t);return o}},231947:(e,t,o)=>{o.d(t,{D3:()=>d,DX:()=>a,KY:()=>c,Ms:()=>l,N1:()=>_,_P:()=>n,lJ:()=>s,nl:()=>i,q6:()=>r});let l=(e,t)=>{let o=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(o=t.user.username),o},i=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",n=(e,t,o)=>o&&o.user&&t&&t.isAuth&&o.id!==t.id?o.user.merchantId:e.advertiser?.merchant_id,a=(e,t,o)=>o&&o.user&&e.isAuth&&o.id!==e.id?o.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,r=(e,t,o)=>{let l=e&&e.isAuth&&o&&o.id&&o.id!==e.id&&o.id===t;return!!l},d=(e,t,o)=>{let l=r(e,t,o)||e&&e.isAuth&&t===e.id;return!!l},c=(e,t,o)=>{let l=t&&t.owner&&t.owner.id||"";return d(e,l,o)};function _(e,t,o){let l=t?t.id:"";return d(e,l,o)}},139405:(e,t,o)=>{o.d(t,{pb:()=>A,nf:()=>x,lV:()=>b});var l=o(667294),i=o(702664),s=o(441143),n=o.n(s),a=o(214494),r=o(425288),d=o(186656),c=o(505920),_=o(594736),u=o(767546);let m={feature_map:Object.freeze({})},h=(e,t)=>{let o={...(0,u.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,_.ZP)(e,o)?e:o},g=(e=m,t)=>{if("FETCH_COMPLETE"===t.type){let{payload:{resource:o}}=t,{data:l}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===o||"AggregatedCommentReplyFeedResource"===o||"DidItCommentsResource"===o){let t=l||[],o=t.reduce((t,o)=>(t[o.id]=h(e[o.id],o),t),{});return{...e,...o}}if("UnifiedCommentsResource"===o&&l&&l.length>0){let t=l.filter(e=>"aggregatedcomment"===e.type),o=t.reduce((t,o)=>(t[o.id]=h(e[o.id],o),t),{});return{...e,...o}}if("UnifiedCommentsPreviewResource"===o&&l&&l.length>0){let t=l[0].aggregated_comment,o=t?{[t.id]:h(e[t.id],t)}:{},i=l[0].creator_reply,s=i?{[i.id]:h(e[i.id],i)}:{};return{...e,...o,...s}}if("AggregatedCommentFeaturesResource"===o&&l&&Object.keys(l).length>0)return{...e,feature_map:l}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:o}}=t;return o.id?{...e,[o.id]:o}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:o}}=t,l={...e};return delete l[o],l}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:o}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==o))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:o}}=t;return{...e,[o.id]:h(e[o.id],o)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:o}}=t,l=e[o.id],i=l.reaction_counts[1]||0,s={1:o.reaction_by_me?i+1:i-1},n={...l,reaction_by_me:o.reaction_by_me,reaction_counts:s};return{...e,[o.id]:n}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:o}}=t,l=e[o.id],i=l.helpful_count||0,s=o.marked_helpful_by_me?i+1:i-1,n={...l,marked_helpful_by_me:o.marked_helpful_by_me,helpful_count:s};return{...e,[o.id]:n}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:o}}=t,l=e[o.aggregated_comment_id],i={...l,highlighted_by_pin_owner:o.is_highlighted};return{...e,[o.aggregated_comment_id]:i}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:o}}}=t;return{...e,feature_map:{...e.feature_map,...o}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:o,id:l}}=t,i=e[l];if(!i)return e;let s={...i,comment_count:i.comment_count+o};return{...e,[l]:s}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:o,tagged_users:l}}=t,i=e[o],s={...i,tagged_users:l};return{...e,[o]:s}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:o,translatedText:l}}=t,i=e[o],s={...i,translatedText:l};return{...e,[o]:s}}return e};var p=o(785893);let{Provider:f,useHook:y}=(0,r.Z)("AggregatedComments");function A({children:e}){let t=(0,i.useSelector)(({resources:e})=>e.UnifiedCommentsResource),o=m;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),l=t?.reduce((e,t)=>(e[t.id]=h(o[t.id],t),e),{});o={...o,...l}});let[s,n]=(0,l.useReducer)(g,o),a=e=>{n({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",a),(0,c.my)("AggregatedCommentFeaturesResource",a),(0,c.Z8)("AggregatedCommentFeedResource",a),(0,c.my)("AggregatedCommentFeedResource",a),(0,c.Z8)("AggregatedCommentReplyFeedResource",a),(0,c.my)("AggregatedCommentReplyFeedResource",a),(0,c.Z8)("DidItCommentsResource",a),(0,c.my)("DidItCommentsResource",a),(0,c.Z8)("UnifiedCommentsPreviewResource",a),(0,c.my)("UnifiedCommentsPreviewResource",a),(0,c.Z8)("UnifiedCommentsResource",a),(0,c.my)("UnifiedCommentsResource",a);let r=(0,l.useMemo)(()=>({aggregatedComments:s,dispatch:n}),[s,n]);return(0,p.jsx)(f,{value:r,children:e})}function x(){let{dispatch:e}=y();return(0,l.useMemo)(()=>({aggregatedCommentCreated(t,o){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:o}})},aggregatedCommentDeleted:(t,o)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:o}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({commentId:e,reason:t,detailedReasons:o})=>(0,d.Z)({url:`/v3/aggregated_comments/${e}/flag/`,method:"PUT",data:{commentId:e,reason:t,detailedReasons:o}}),deleteCommentMention:async t=>{let{resource_response:o}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),l=o.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:l.id,tagged_users:l.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:o}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),l=o.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:l}})}catch(o){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:o})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:o?"DELETE":"POST"}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!o}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:o,isHighlighted:l})=>{n()(t,"Could not find comment"),n()(o,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:o,highlight:!l}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:o,is_highlighted:!l}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:o})=>{(0,d.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:o?"DELETE":"POST",data:{reaction_type:1}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:o?0:1}}})},updateAggregatedComment:async({commentId:t,force:o,orbacSubjectId:l,tags:i,text:s})=>{let{resource_response:n}=await a.Z.create("AggregatedCommentResource",{commentId:t,force:o,tags:i,text:s,...l?{orbacSubjectId:l}:{}}).callUpdate({showError:!1}),{tagged_users:r}=n.data??{},d=r.map(e=>({...e}));e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:d,tags:JSON.parse(i),text:s}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:o,passcode:l})=>{let{resource_response:i}=await a.Z.create("AggregatedCommentFeaturesResource",{userId:t,featureMap:o,passcode:l}).callUpdate({showError:!1}),s=i.data??Object.freeze({});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:s}}})},updateCommentCount:(t,o)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:o,id:t}})}}),[e])}function b(){let{aggregatedComments:e}=y();return e}},664569:(e,t,o)=>{o.d(t,{n:()=>i,o:()=>l});let l={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},i={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},44004:(e,t,o)=>{o.d(t,{Z:()=>I,w:()=>E});var l,i=o(667294),s=o(702664);o(167912);var n=o(616550),a=o(442279),r=o(883119),d=o(44715),c=o(681669),_=o(784590),u=o(50286),m=o(829407),h=o(19121),g=o(139405),p=o(664569),f=o(114020),y=o(600147),A=o(492583),x=o(698330),b=o(785893);let E=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:o,isDesktop:l,isReversed:i=!1,noCache:s=!1})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:o,page_size:l?10:25,redux_normalize_feed:!0,is_reversed:i},noCache:s}),T=(0,a.P1)((e,t,o)=>o,({feeds:e},t)=>e[`${A.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,t,o,l)=>l,(e,t,o,l)=>t?.map(({id:t,type:i})=>{let s="aggregatedcomment"===i.toLowerCase()?e[t]:o[t];if(!s)return;let n="string"==typeof s.user?l[s.user]??{}:s.user??{};return{...s,user:n??{}}}).filter(e=>e)||[]),P=void 0!==l?l:l=o(90838),v=({aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,commentsDisabled:l,hasComments:a,isReadOnly:c,pinId:A,isVideo:P,pinnerId:v,scrollContainer:I,setIsComposingNewComment:C=()=>{},storyPinDataId:w,viewParameter:k,toggleComposerForReply:z,openMwebOverflowMenu:j})=>{let{comment_id:D}=(0,n.UO)(),R=(0,s.useDispatch)(),L=(0,u.HG)(),S=(0,h.Z)(),O=(0,i.useRef)(a),M=(0,_.Z)(O.current&&e?E({aggregatedPinDataId:e,featuredCommentIds:D?[D]:[],isDesktop:L}):null),{removeUnauthCommentPinId:G,unauthCommentPinId:N}=(0,f.C)(),Z=(0,g.lV)(),{toggleAggregatedCommentHelpful:U,toggleAggregatedCommentLike:B}=(0,g.nf)(),F=(0,x.kW)(),H=(0,s.useSelector)(t=>T(t,e,Z,F)),[W,$]=(0,i.useState)(void 0),q=()=>{C(!0)};return(0,m.Z)(()=>{!L&&S.isAuth&&N&&A&&N===A&&(q(),G())}),(0,i.useEffect)(()=>{let e=()=>{let t=!!I&&I.scrollTop+I.clientHeight+10>=I.scrollHeight;M&&!M.isFetching&&(M.isAtEnd?I?.removeEventListener("scroll",e):t&&M.fetchMore())};return I?.addEventListener("scroll",e),()=>{I?.removeEventListener("scroll",e)}},[M,I]),(0,b.jsx)(i.Fragment,{children:(0,b.jsx)(r.xu,{display:"flex",marginTop:L?6:0,width:"100%",children:(0,b.jsx)(d.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,comments:H,commentsDisabled:l,isDesktop:L,isLoaded:M&&M.isLoaded||!a,isReadOnly:c,isVideo:P,openOverflowMenu:j,parentId:e??"",parentType:p.o.pin,pinId:A,pinnerId:v,reactionListCommentId:W,showReactionListForComment:$,storyPinDataId:w,toggleHelpful:(e,t,o)=>()=>{o?R((0,y.YH)({didItDataId:e,isMarkedHelpfulByMe:t})):U({aggregatedCommentId:e,isMarkedHelpfulByMe:t})},toggleLike:(e,t,o)=>()=>{o?R((0,y.wH)({didItDataId:e,isLikedByMe:t})):B({aggregatedCommentId:e,isLikedByMe:t})},toggleReplyComposer:z,userAvatarSize:"sm",viewParameter:k})})})};function I({pinKey:e,...t}){let{data:o}=(0,c.sr)(P,e,{type:"pin",useLegacyAdapter:e=>({aggregatedPinData:e.aggregated_pin_data&&{commentCount:e.aggregated_pin_data.comment_count,didItData:e.aggregated_pin_data.did_it_data&&{imagesCount:e.aggregated_pin_data.did_it_data.images_count},entityId:e.aggregated_pin_data.id??""},closeupAttribution:e.closeup_attribution&&{entityId:e.closeup_attribution.id??"",username:e.closeup_attribution.username},commentsDisabled:e.comments_disabled,doneByMe:e.done_by_me,entityId:e.id,pinner:e.pinner&&{entityId:e.pinner.id},storyPinData:e.story_pin_data&&{entityId:e.story_pin_data.id??""},videos:e.videos&&{videoList:e.videos.video_list&&{__typename:"VideoList"}}})}),l=(o?.aggregatedPinData?.commentCount||0)+(o?.aggregatedPinData?.didItData?.imagesCount||0);return(0,b.jsx)(v,{aggregatedPinDataId:o?.aggregatedPinData?.entityId,closeupAttributionId:o?.closeupAttribution?.entityId,closeupAttributionUsername:o?.closeupAttribution?.username,commentsDisabled:o?.commentsDisabled,disablePhotoCommentSelection:!!o?.doneByMe,hasComments:l>0&&!o?.commentsDisabled,isVideo:!!o?.videos?.videoList,pinId:o?.entityId,pinnerId:o?.pinner?.entityId,storyPinDataId:o?.storyPinData?.entityId,...t})}},114020:(e,t,o)=>{o.d(t,{C:()=>a,p:()=>r});var l=o(667294),i=o(425288),s=o(785893);let{Provider:n,useHook:a}=(0,i.Z)("Session");function r({children:e}){let[t,o]=(0,l.useState)(void 0),i=(0,l.useCallback)(()=>o(void 0),[]),a=(0,l.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:o,removeUnauthCommentPinId:i}),[t,i]);return(0,s.jsx)(n,{value:a,children:e})}},600147:(e,t,o)=>{o.d(t,{DD:()=>_,lg:()=>u,Th:()=>h,YH:()=>r,wH:()=>a,IU:()=>m,L8:()=>c});var l=o(214494),i=o(186656),s=o(956800),n=o(492583);function a({didItDataId:e,isLikedByMe:t}){return o=>((0,i.Z)({url:`/v3/did_it/${e}/like/`,method:t?"DELETE":"POST"}),o({type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:!t}}))}function r({didItDataId:e,isMarkedHelpfulByMe:t}){return o=>((0,i.Z)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST"}),o({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function d(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function c(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function _({aggregatedPinDataId:e,details:t,fromUnifiedComment:o,image_signatures:i,pin_id:a,username:r,updateParentDidItCount:d}){let _={aggregatedPinDataId:e,details:t,image_signatures:i,pin_id:a};return t=>l.Z.create("DidItActivityResource",_).callCreate().then(l=>{let i=l.resource_response.data;t({type:"PIN_DID_IT",payload:{id:a,value:!0}}),t({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:i}}),t((0,s.vX)({feedId:e,feedType:o?n.Z.UNIFIED_COMMENTS:n.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type})),t((0,s.vX)({feedId:r,feedType:n.Z.TRIED_IT_FEED,itemIds:[i.id],itemType:i.type})),d&&t(c(e,1))},()=>{})}function u({aggregatedPinDataId:e,feedType:t,id:o,isOwnedByMe:i,pinId:a,username:r,updateParentDidItCount:_}){return u=>{l.Z.create("DidItActivityResource",{user_did_it_data_id:o,pinId:a}).callDelete().then(()=>{i&&u({type:"PIN_DID_IT",payload:{id:a,value:!1}}),u(d(o)),u((0,s.EX)({feedId:e??"",feedType:t||n.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),u((0,s.EX)({feedId:r,feedType:n.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),u((0,s.EX)({feedId:r,feedType:n.Z.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),_&&u(c(o,-1))},()=>{})}}function m({id:e,details:t,image_signatures:o,pinId:i}){let s={details:t,image_signatures:o,user_did_it_data_id:e,pin_id:i};return e=>{l.Z.create("DidItActivityResource",s).callUpdate().then(t=>{let o=t.resource_response.data;e({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:o}})},()=>{})}}function h(e,t,o,l,a){return r=>{(0,i.Z)({url:`/v3/did_it/${o}/flag/`,method:"PUT",data:{reason:l,detailed_reasons:t,explanation:void 0}}).then(()=>{r(d(o)),e&&r((0,s.EX)({feedId:e,feedType:n.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"})),r((0,s.EX)({feedId:a,feedType:n.Z.TRIED_IT_FEED,itemIds:[o],itemType:"userdiditdata"}))},()=>{})}}},274415:(e,t,o)=>{o.d(t,{R:()=>l});function l(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}},550393:(e,t,o)=>{o.d(t,{Q:()=>s,a:()=>i});var l=o(186656);function i(e,t){return async o=>{let{resource_response:i}=await (0,l.Z)({url:`/v3/storypins/${e}/mentions/`,method:"DELETE"});return o({type:"DELETE_PIN_MENTION",payload:{pinId:e,userId:t}}),i}}function s(e){return async t=>{let{resource_response:o}=await (0,l.Z)({url:`/v3/aggregated_comments/${e}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),{data:i}=o;return t({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users}}),o}}},311716:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},600636:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpfulOutline-7f59f782.svg"},559113:e=>{e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"},133758:e=>{e.exports="https://s.pinimg.com/webapp/commentLovedOutline-97205606.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/5675.en_IN-8de3faeba2ab04a3.mjs.map